import{t as r,i as c,v as d,a as f}from"./main-D2V5YL7I.js";import{J as u}from"./just-validate.es-C73wyOde.js";/* empty css             *//* empty css                  */r.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",hideEasing:"linear",showMethod:"slideDown",hideMethod:"slideUp"};c(".dv-cart-payment__form textarea",1e3,1e3);c("#dv-cart-payment__offcanvas-form textarea",1e3,1e3);const v=()=>{const e=d();e.submitFormAutomatically=!1;const t=new u("#dv-cart-payment__form",e);return t.addField("#sellerNotes",[{rule:"minLength",value:6,errorMessage:"حداقل 6 کاراکتر الزامی است."},{rule:"maxLength",value:1e3,errorMessage:"حداکثر 1000 کاراکتر الزامی است."}],{errorsContainer:f("#sellerNotes")}),t},p=()=>{const e=d();e.submitFormAutomatically=!1;const t=new u("#dv-cart-payment__offcanvas-form",e);return t.addField("#sellerNotes-offcanvas",[{rule:"minLength",value:6,errorMessage:"حداقل 6 کاراکتر الزامی است."},{rule:"maxLength",value:1e3,errorMessage:"حداکثر 1000 کاراکتر الزامی است."}],{errorsContainer:f("#sellerNotes-offcanvas")}),t},w=(e,t)=>{const s=document.querySelector("#dv-cart-payment__form");s&&s.addEventListener("submit",async o=>{o.preventDefault();const a=window.Alpine.store("sellCart");if(!a){r.error("خطا در دسترسی به سبد فروش.","خطای سیستم");return}if(a.items.length===0){r.warning("سبد فروش شما خالی است. ابتدا بازی‌ای برای فروش اضافه کنید.","سبد فروش خالی");return}const n=(document.querySelector("#sellerNotes")?.value||"")?.trim();if(n&&n.length<6){r.warning("توضیحات فروش باید حداقل ۶ کاراکتر باشد.","خطا در توضیحات");return}if(n&&!await e.validate()){r.warning("لطفا توضیحات فروش را به درستی تکمیل کنید (حداقل 6 کاراکتر).","خطا در فرم");return}await a.completeSell()});const l=document.querySelector("#dv-cart-payment__offcanvas-form");l&&l.addEventListener("submit",async o=>{o.preventDefault();const a=window.Alpine.store("sellCart");if(!a){r.error("خطا در دسترسی به سبد فروش.","خطای سیستم");return}if(a.items.length===0){r.warning("سبد فروش شما خالی است. ابتدا بازی‌ای برای فروش اضافه کنید.","سبد فروش خالی");return}const n=(document.querySelector("#sellerNotes-offcanvas")?.value||"")?.trim();if(n&&n.length<6){r.warning("توضیحات فروش باید حداقل ۶ کاراکتر باشد.","خطا در توضیحات");return}if(n&&!await t.validate()){r.warning("لطفا توضیحات فروش را به درستی تکمیل کنید (حداقل 6 کاراکتر).","خطا در فرم");return}await a.completeSell();const i=bootstrap.Offcanvas.getInstance(document.querySelector("#dv-cart-payment__offcanvas"));i&&i.hide()})},g=()=>{const e=document.querySelector(".dv-btn__clear-all");e&&e.addEventListener("click",async()=>{const t=window.Alpine.store("sellCart");if(!t){r.error("خطا در دسترسی به سبد فروش.","خطای سیستم");return}await t.clearCart()})},y=()=>new Promise(e=>{window.Alpine&&window.Alpine.store("sellCart")?e():document.addEventListener("alpine:init",()=>{setTimeout(e,100)})}),h=async()=>{await y(),window.Alpine.store("sellCart");const e=v(),t=p();return w(e,t),g(),console.log("Sell Cart page initialized successfully"),{validator:e,validatorOffcanvas:t}};document.addEventListener("DOMContentLoaded",()=>{h().catch(e=>{console.error("Error initializing sell cart page:",e),r.error("خطا در بارگذاری صفحه سبد فروش.","خطا!")})});
