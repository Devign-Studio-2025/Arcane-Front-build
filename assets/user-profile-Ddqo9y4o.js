import{t as d,v as h,a as s,b as m}from"./main-D2V5YL7I.js";import{J as c}from"./just-validate.es-C73wyOde.js";/* empty css                  */const E={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",hideEasing:"linear",showMethod:"slideDown",hideMethod:"slideUp"};d.options=E;let p=null,f=null;const x=()=>{const a=document.getElementById("profile-img-modal"),t=document.getElementById("profile-img-offcanvas");p=a?new m.Modal(a):null,f=t?new m.Offcanvas(t):null};document.addEventListener("DOMContentLoaded",x);const g={...h(),submitFormAutomatically:!1},i={firstName:[{rule:"required",errorMessage:"نام الزامی است."},{rule:"minLength",value:4,errorMessage:"حداقل 4 کاراکتر وارد کنید."},{rule:"maxLength",value:50,errorMessage:"حداکثر 50 کاراکتر مجاز است"},{rule:"customRegexp",value:/^[\u0600-\u06FFa-zA-Z\s]+$/,errorMessage:"لطفاً فقط حروف فارسی یا انگلیسی وارد کنید."}],lastName:[{rule:"required",errorMessage:"نام خانوادگی الزامی است."},{rule:"minLength",value:4,errorMessage:"حداقل 4 کاراکتر وارد کنید."},{rule:"maxLength",value:50,errorMessage:"حداکثر 50 کاراکتر مجاز است"},{rule:"customRegexp",value:/^[\u0600-\u06FFa-zA-Z\s]+$/,errorMessage:"لطفاً فقط حروف فارسی یا انگلیسی وارد کنید."}],phoneNumber:[{rule:"required",errorMessage:"شماره همراه الزامی است"},{rule:"number",errorMessage:"فقط عدد مجاز است"},{rule:"minLength",value:11,errorMessage:"شماره باید ۱۱ رقمی باشد"},{rule:"maxLength",value:11,errorMessage:"شماره باید ۱۱ رقمی باشد"},{rule:"customRegexp",value:/^09[0-9]{9}$/,errorMessage:"شماره موبایل معتبر وارد کنید "}],email:[{rule:"email",errorMessage:"ایمیل معتبر وارد کنید."}]},M=new c(".dv-user-profile__form",g);M.addField("#first_name",i.firstName,{errorsContainer:s("#first_name")}).addField("#last_name",i.lastName,{errorsContainer:s("#last_name")}).addField("#phone_number",i.phoneNumber,{errorsContainer:s("#phone_number")}).addField("#email",i.email,{errorsContainer:s("#email")}).onSuccess(()=>{document.querySelector("#dv-user-profile__form-submit-btn").__xAsyncRun?.()});const v=a=>{const t=a==="modal"?"modal":"offcanvas",e={uploadArea:document.getElementById(`uploadArea-${t}`),fileInput:document.getElementById(`fileInput-${t}`),previewImage:document.getElementById(`previewImage-${t}`),uploadIcon:document.getElementById(`uploadIcon-${t}`),uploadText:document.querySelector(`.${t}-upload-text`),form:document.getElementById(`form-profile-image-${t}`)};if(!e.uploadArea||!e.fileInput||!e.previewImage||!e.form)return console.error(`Elements not found for ${a}`),null;const o=()=>{e.fileInput.value="",e.previewImage.style.display="none",e.previewImage.src="",e.uploadArea.classList.remove("active"),e.uploadIcon&&(e.uploadIcon.style.display="block"),e.uploadText&&(e.uploadText.style.display="block")},n=r=>{if(!r)return;const l=new FileReader;l.onload=u=>{e.previewImage.src=u.target.result,e.previewImage.style.display="block",e.uploadArea.classList.add("active"),e.uploadIcon&&(e.uploadIcon.style.display="none"),e.uploadText&&(e.uploadText.style.display="none")},l.readAsDataURL(r)};return e.uploadArea.addEventListener("click",()=>e.fileInput.click()),e.fileInput.addEventListener("change",r=>{r.target.files?.[0]&&n(r.target.files[0])}),e.uploadArea.addEventListener("dragover",r=>{r.preventDefault(),e.uploadArea.classList.add("active")}),e.uploadArea.addEventListener("dragleave",()=>{e.fileInput.files.length||e.uploadArea.classList.remove("active")}),e.uploadArea.addEventListener("drop",r=>{r.preventDefault(),r.dataTransfer.files.length&&(e.fileInput.files=r.dataTransfer.files,e.fileInput.dispatchEvent(new Event("change")))}),{resetUploadArea:o,fileInput:e.fileInput,form:e.form}},I=v("modal"),b=v("offcanvas"),w=()=>{const a=document.getElementById("profile-img-modal"),t=document.getElementById("profile-img-offcanvas");a?.addEventListener("hidden.bs.modal",()=>{I?.resetUploadArea?.()}),t?.addEventListener("hidden.bs.offcanvas",()=>{b?.resetUploadArea?.()})};w();const A=a=>{const t=a==="modal"?p:f,e=a==="modal"?".modal-backdrop":".offcanvas-backdrop";t?.hide(),document.querySelector(e)?.remove()},L=async(a,t,e)=>{a.preventDefault();const o=a.target.querySelector('button[type="submit"]'),n=o.querySelector(".dv-btn__text"),r=n.textContent;o.disabled=!0,n.textContent="در حال ارسال...";try{const l=new FormData(a.target);await new Promise(u=>setTimeout(u,1500)),d.success("تصویر پروفایل با موفقیت به‌روزرسانی شد.","آپلود انجام شد"),A(t),a.target.reset(),e?.resetUploadArea?.()}catch{d.error("خطا در آپلود تصویر","خطا")}finally{o.disabled=!1,n.textContent=r}},y=(a,t,e)=>{const o=new c(a,g),n=[{rule:"required",errorMessage:"انتخاب تصویر الزامی است."},{rule:"minFilesCount",value:1,errorMessage:"لطفاً یک تصویر انتخاب کنید."},{rule:"maxFilesCount",value:1,errorMessage:"فقط یک تصویر مجاز است."},{rule:"files",value:{files:{types:["image/jpeg","image/png"],maxSize:50*1024*1024,minSize:1024}},errorMessage:"فایل باید کمتر از 50MB و از نوع JPEG یا PNG باشد."}];return o.addField(t,n,{errorsContainer:document.querySelector(t)?.closest(".dv-profile__upload-container")}).onSuccess(r=>{L(r,e,e==="modal"?I:b)}).onFail(()=>{d.warning("لطفاً تصویر معتبری انتخاب کنید.","خطا در انتخاب تصویر")}),o};y("#form-profile-image-modal","#fileInput-modal","modal");y("#form-profile-image-offcanvas","#fileInput-offcanvas","offcanvas");
