import{N as x,i as q,v as E,a as h}from"./main-D2V5YL7I.js";import{S as C}from"./swiper-CRU51p5Y.js";import{J as L}from"./just-validate.es-C73wyOde.js";/* empty css                 */new C(".dv-section__game-cards-swiper",{direction:"horizontal",slidesPerView:"auto",spaceBetween:16});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-dropdown]").forEach(A),w()});function A(e){const r=e.querySelector("[data-dropdown-value]");if(e.querySelectorAll(".dropdown-item"),!!r){if(r.value){const t=e.querySelector(`.dropdown-item[data-value="${r.value}"]`);t&&_(e,t)}e.addEventListener("click",t=>{const a=t.target.closest(".dropdown-item");!a||!e.contains(a)||_(e,a)})}}function _(e,r){const t=e.querySelector(".dv-dropdown__btn-text"),a=e.querySelector("[data-dropdown-value]"),s=r.querySelector(".dv-dropdown-menu__value");!t||!a||!s||(t.textContent=s.textContent,a.value=r.dataset.value||"",e.querySelectorAll(".dropdown-item").forEach(i=>i.classList.remove("active")),r.classList.add("active"))}x.bind('[data-fancybox="game-gallery"]',{animated:!0,showClass:"fancybox-fadeIn",hideClass:"fancybox-fadeOut",Toolbar:{display:["close","zoom","slideshow","fullscreen"]},Thumbs:{autoStart:!0,type:"modern"},Image:{zoom:!0}});function w(e=".dv-comment__stars-wrapper"){const r=document.querySelectorAll(e);r.length&&r.forEach(t=>{const a=Array.from(t.querySelectorAll(".dv-comment__star-label")),s=Array.from(t.querySelectorAll('input[type="radio"][name="rating"]')),i=t.querySelector(".dv-comment__score-title"),S=a.length;let l=0;function v(n){return Math.max(0,Math.min(S,n))}function u(n){const o=v(n);a.forEach((c,d)=>{const g=c.querySelector(".dv-comment__star-icon"),m=d<o;c.classList.toggle("filled",m),c.setAttribute("aria-checked",String(m)),g&&(g.textContent=m?"star":"star_border")})}function p(n,{userInitiated:o=!0}={}){const c=v(n);l=c,s.forEach(d=>{d.checked=Number(d.value)===c}),i&&(i.textContent=`${c} ستاره`),u(c),t.dispatchEvent(new CustomEvent("rating-changed",{detail:{value:c,userInitiated:o},bubbles:!0}))}t.addEventListener("pointerover",n=>{const o=n.target.closest(".dv-comment__star-label");o&&u(Number(o.dataset.value))}),t.addEventListener("pointerleave",()=>{u(l)}),t.addEventListener("click",n=>{const o=n.target.closest(".dv-comment__star-label");o&&p(Number(o.dataset.value))});const f=s.find(n=>n.checked);f?(l=Number(f.value),u(l),i&&(i.textContent=`${l} ستاره`)):u(0)})}q("#comment-text",1e3,1e3);const y=E();y.submitFormAutomatically=!1;const b=new L(".dv-comment__form",y);b.addField('input[name="rating"]',[{rule:"required",errorMessage:"لطفاً امتیاز دهید"}],{errorsContainer:h(".dv-comment__stars-wrapper")}).addField("#comment-text",[{rule:"minLength",value:10,errorMessage:"نظر باید حداقل ۱۰ کاراکتر باشد"},{rule:"maxLength",value:500,errorMessage:"نظر نباید بیشتر از ۵۰۰ کاراکتر باشد"}],{errorsContainer:h("#comment-text")}).onSuccess(()=>{document.querySelector("#dv-comment__submit-btn").__xAsyncRun()});document.querySelectorAll('input[name="rating"]').forEach(e=>{e.addEventListener("change",()=>{b.revalidateField('input[name="rating"]')})});
