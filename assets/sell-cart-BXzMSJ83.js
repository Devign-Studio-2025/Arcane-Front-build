import{t as a,i as l,v as c,a as d}from"./main-CJ3woiqU.js";import{J as f}from"./just-validate.es-C73wyOde.js";/* empty css             *//* empty css                  */a.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",hideEasing:"linear",showMethod:"slideDown",hideMethod:"slideUp"};l(".dv-cart-payment__form textarea",1e3,1e3);l("#dv-cart-payment__offcanvas-form textarea",1e3,1e3);const m=()=>{const e=c();e.submitFormAutomatically=!1;const t=new f("#dv-cart-payment__form",e);return t.addField("#sellerNotes",[{rule:"required",errorMessage:"متن پیام الزامی است."},{rule:"minLength",value:6,errorMessage:"حداقل 6 کاراکتر الزامی است."},{rule:"maxLength",value:1e3,errorMessage:"حداکثر 1000 کاراکتر الزامی است."}],{errorsContainer:d("#sellerNotes")}),t},v=()=>{const e=c();e.submitFormAutomatically=!1;const t=new f("#dv-cart-payment__offcanvas-form",e);return t.addField("#sellerNotes-offcanvas",[{rule:"required",errorMessage:"متن پیام الزامی است."},{rule:"minLength",value:6,errorMessage:"حداقل 6 کاراکتر الزامی است."},{rule:"maxLength",value:1e3,errorMessage:"حداکثر 1000 کاراکتر الزامی است."}],{errorsContainer:d("#sellerNotes-offcanvas")}),t},p=(e,t)=>{const o=document.querySelector("#dv-cart-payment__form");o&&o.addEventListener("submit",async n=>{if(n.preventDefault(),!await e.validate()){a.warning("لطفا توضیحات فروش را به درستی تکمیل کنید (حداقل 6 کاراکتر).","خطا در فرم");return}const r=window.Alpine.store("sellCart");if(!r){a.error("خطا در دسترسی به سبد فروش.","خطای سیستم");return}await r.completeSell()});const i=document.querySelector("#dv-cart-payment__offcanvas-form");i&&i.addEventListener("submit",async n=>{if(n.preventDefault(),!await t.validate()){a.warning("لطفا توضیحات فروش را به درستی تکمیل کنید (حداقل 6 کاراکتر).","خطا در فرم");return}const r=window.Alpine.store("sellCart");if(!r){a.error("خطا در دسترسی به سبد فروش.","خطای سیستم");return}await r.completeSell();const s=bootstrap.Offcanvas.getInstance(document.querySelector("#dv-cart-payment__offcanvas"));s&&s.hide()})},w=()=>{const e=document.querySelector(".dv-clear-cart-btn");e&&e.addEventListener("click",async()=>{const t=window.Alpine.store("sellCart");if(!t){a.error("خطا در دسترسی به سبد فروش.","خطای سیستم");return}await t.clearCart()})},g=()=>new Promise(e=>{window.Alpine&&window.Alpine.store("sellCart")?e():document.addEventListener("alpine:init",()=>{setTimeout(e,100)})}),y=async()=>{await g(),a.info("می‌توانید بازی‌های خود را برای فروش ثبت کنید.","به سبد فروش خوش آمدید");const e=m(),t=v();return p(e,t),w(),console.log("Sell Cart page initialized successfully"),{validator:e,validatorOffcanvas:t}};document.addEventListener("DOMContentLoaded",()=>{y().catch(e=>{console.error("Error initializing sell cart page:",e),a.error("خطا در بارگذاری صفحه سبد فروش.","خطا!")})});
