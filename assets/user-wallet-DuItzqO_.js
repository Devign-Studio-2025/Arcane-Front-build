import{m as g,v as w,a as u}from"./main-J0b_Y7a1.js";import{J as _}from"./just-validate.es-C73wyOde.js";/* empty css                  */import{D as F,t as M}from"./datatable-fa-CUKt88BO.js";const p=new F("#sell-list-table",{language:M,dom:"tpi",order:[[1,"desc"]],columnDefs:[{searchable:!1,orderable:!1,targets:0,width:"auto"},{targets:3,createdCell:function(t,r){t.textContent=parseInt(r).toLocaleString()}}],on:{draw:t=>{let r=t.dt.page.info().start;t.dt.column(0,{page:"current"}).nodes().each((a,i)=>{a.textContent=r+i+1})}}});g.effect(()=>{const t=g.store("tableStore").search;p.search(t).draw();const r=g.store("tableStore").pageSize;p.page.len(r).draw()});const o=t=>t.replace(/\D/g,""),f=(t,r=null)=>{t&&(t.classList.contains("dv-format-num")||t.addEventListener("input",function(a){const i=this.selectionStart;this.selectionEnd;let e=o(this.value);r&&e.length>r&&(e=e.substring(0,r)),this.value=e;const n=Math.max(0,i-(this.value.length-e.length));this.setSelectionRange(n,n);const s=`#${this.id}`;l&&this.form.classList.contains("dv-withdraw-modal__form")&&l.revalidateField(s),h&&this.form.classList.contains("dv-deposit-modal__form")&&h.revalidateField(s)}))},y=t=>o(t).length===16,q=t=>o(t).length===24,b=(t,r,a=null)=>{const i=o(t);if(!i)return!1;const e=Number(i);return!(isNaN(e)||e<r||a!==null&&e>a)},C=document.querySelector(".dv-withdraw-modal__form");let l=null;if(C){const t=w();t.submitFormAutomatically=!1;const r=document.querySelector("#account-sheba-number"),a=document.querySelector("#bank-card-number"),i=document.querySelector("#withdraw-amount");l=new _(".dv-withdraw-modal__form",t),l.addField("#withdraw-amount",[{rule:"required",errorMessage:"مبلغ برداشت الزامی است."},{validator:e=>b(e,1e4),errorMessage:"حداقل مبلغ برداشت ۱۰٬۰۰۰ ریال است."}],{errorsContainer:u("#withdraw-amount")}).addField("#account-sheba-number",[{validator:e=>{const n=o(a?a.value:""),s=o(e);return!!(n||s)},errorMessage:"شماره شبا یا شماره کارت الزامی است."},{validator:e=>{const n=o(e);return n?q(n):!0},errorMessage:"شماره شبا باید دقیقاً ۲۴ رقم عددی باشد."}],{errorsContainer:u("#account-sheba-number")}).addField("#bank-card-number",[{validator:e=>{const n=o(e),s=o(r?r.value:"");return!!(n||s)},errorMessage:"شماره کارت یا شماره شبا الزامی است."},{validator:e=>{const n=o(e);return n?y(n):!0},errorMessage:"شماره کارت باید ۱۶ رقم باشد."}],{errorsContainer:u("#bank-card-number")}).addField("#bank-account-owner",[{rule:"required",errorMessage:"نام مالک حساب الزامی است."},{rule:"minLength",value:4,errorMessage:"حداقل ۴ کاراکتر وارد کنید."},{rule:"maxLength",value:50,errorMessage:"حداکثر ۵۰ کاراکتر مجاز است."},{rule:"customRegexp",value:/^[\u0600-\u06FFa-zA-Z\s]+$/,errorMessage:"فقط حروف فارسی یا انگلیسی مجاز است."}],{errorsContainer:u("#bank-account-owner")}).onSuccess(()=>{const e=document.querySelector("#dv-withdraw-modal__form-btn");e&&e.__xAsyncRun&&e.__xAsyncRun()}),i&&!i.classList.contains("dv-format-num")&&f(i),r&&f(r,24),a&&(f(a,16),a.addEventListener("input",function(e){const n=this.selectionStart;let s=o(this.value);s.length>16&&(s=s.substring(0,16));let c=s;if(s.length>0){const v=[];for(let m=0;m<s.length;m+=4)v.push(s.substring(m,m+4));c=v.join(" ")}this.value=c;let d=n;const S=c.substring(0,n).split(" ").length-1;d=n+S,d=Math.min(d,c.length),this.setSelectionRange(d,d),l&&(l.revalidateField("#bank-card-number"),l.revalidateField("#account-sheba-number"))})),[r,a].forEach(e=>{e&&e.addEventListener("input",()=>{l&&(l.revalidateField("#account-sheba-number"),l.revalidateField("#bank-card-number"))})})}const V=document.querySelector(".dv-deposit-modal__form");let h=null;if(V){const t=w();t.submitFormAutomatically=!1;const r=document.querySelector("#desposit-amount");h=new _(".dv-deposit-modal__form",t),h.addField("#desposit-amount",[{rule:"required",errorMessage:"مبلغ واریز الزامی است."},{validator:a=>b(a,1e4),errorMessage:"حداقل مبلغ واریز ۱۰٬۰۰۰ ریال است."},{validator:a=>b(a,1e4,1e9),errorMessage:"حداکثر مبلغ واریز ۱۰۰٬۰۰۰٬۰۰۰ تومان است."}],{errorsContainer:u("#desposit-amount")}).onSuccess(()=>{const a=document.querySelector("#dv-deposit-modal__form-btn");a&&a.__xAsyncRun&&a.__xAsyncRun()}),r&&!r.classList.contains("dv-format-num")&&f(r)}
