import{m as S,v as V,a as b}from"./main-D2V5YL7I.js";import{J as _}from"./just-validate.es-C73wyOde.js";/* empty css                  */import{D as x,t as E}from"./datatable-fa-DSWKXLgg.js";const A=new x("#sell-list-table",{language:E,dom:"tpi",order:[[1,"desc"]],columnDefs:[{searchable:!1,orderable:!1,targets:0,width:"auto"},{targets:3,createdCell:function(e,r){e.textContent=parseInt(r).toLocaleString()}}],on:{draw:e=>{let r=e.dt.page.info().start;e.dt.column(0,{page:"current"}).nodes().each((a,o)=>{a.textContent=r+o+1})}}});S.effect(()=>{const e=S.store("tableStore").search;A.search(e).draw();const r=S.store("tableStore").pageSize;A.page.len(r).draw()});const d=e=>e.replace(/\D/g,""),C=(e,r=null,a=null)=>{e&&(e.classList.contains("dv-format-num")||e.addEventListener("input",function(o){const i=this.selectionStart;this.selectionEnd;let n=d(this.value);r&&n.length>r&&(n=n.substring(0,r)),this.value=n;const c=Math.max(0,i-(this.value.length-n.length));this.setSelectionRange(c,c),a&&this.id&&a.revalidateField(`#${this.id}`)}))},$=e=>d(e).length===16,R=e=>d(e).length===24,M=(e,r,a=null)=>{const o=d(e);if(!o)return!1;const i=Number(o);return!(isNaN(i)||i<r||a!==null&&i>a)},L=()=>{document.querySelectorAll(".dv-deposit-modal__form").forEach(a=>{const o=a.getAttribute("data-form-type")==="offcanvas",n=`#deposit-amount${o?"-offcanvas":"-modal"}`,c=`#dv-deposit${o?"-offcanvas":"-modal"}-form-btn`,m=V();m.submitFormAutomatically=!1,new _(a,m).addField(n,[{rule:"required",errorMessage:"مبلغ واریز الزامی است."},{validator:u=>M(u,1e4),errorMessage:"حداقل مبلغ واریز ۱۰٬۰۰۰ ریال است."},{validator:u=>M(u,1e4,1e9),errorMessage:"حداکثر مبلغ واریز ۱۰۰٬۰۰۰٬۰۰۰ تومان است."}],{errorsContainer:b(n)}).onSuccess(()=>{const u=document.querySelector(c);u&&u.__xAsyncRun&&u.__xAsyncRun()})}),document.querySelectorAll(".dv-withdraw-modal__form").forEach(a=>{const o=a.getAttribute("data-form-type")==="offcanvas",i=o?"-offcanvas":"-modal",n=`#withdraw-amount${i}`,c=`#account-sheba-number${i}`,m=`#bank-card-number${i}`,F=`#bank-account-owner${i}`,u=`#dv-withdraw${o?"-offcanvas":"-modal"}-form-btn`,y=V();y.submitFormAutomatically=!1;const h=document.querySelector(c),g=document.querySelector(m);document.querySelector(n);const f=new _(a,y);f.addField(n,[{rule:"required",errorMessage:"مبلغ برداشت الزامی است."},{validator:t=>M(t,1e4),errorMessage:"حداقل مبلغ برداشت ۱۰٬۰۰۰ ریال است."}],{errorsContainer:b(n)}).addField(c,[{validator:t=>{const s=d(g?g.value:""),l=d(t);return!!(s||l)},errorMessage:"شماره شبا یا شماره کارت الزامی است."},{validator:t=>{const s=d(t);return s?R(s):!0},errorMessage:"شماره شبا باید دقیقاً ۲۴ رقم عددی باشد."}],{errorsContainer:b(c)}).addField(m,[{validator:t=>{const s=d(t),l=d(h?h.value:"");return!!(s||l)},errorMessage:"شماره کارت یا شماره شبا الزامی است."},{validator:t=>{const s=d(t);return s?$(s):!0},errorMessage:"شماره کارت باید ۱۶ رقم باشد."}],{errorsContainer:b(m)}).addField(F,[{rule:"required",errorMessage:"نام مالک حساب الزامی است."},{rule:"minLength",value:4,errorMessage:"حداقل ۴ کاراکتر وارد کنید."},{rule:"maxLength",value:50,errorMessage:"حداکثر ۵۰ کاراکتر مجاز است."},{rule:"customRegexp",value:/^[\u0600-\u06FFa-zA-Z\s]+$/,errorMessage:"فقط حروف فارسی یا انگلیسی مجاز است."}],{errorsContainer:b(F)}).onSuccess(()=>{const t=document.querySelector(u);t&&t.__xAsyncRun&&t.__xAsyncRun()}),h&&C(h,24,f),g&&(C(g,16,f),g.addEventListener("input",function(t){const s=this.selectionStart;let l=d(this.value);l.length>16&&(l=l.substring(0,16));let p=l;if(l.length>0){const I=[];for(let w=0;w<l.length;w+=4)I.push(l.substring(w,w+4));p=I.join(" ")}this.value=p;let v=s;const q=p.substring(0,s).split(" ").length-1;v=s+q,v=Math.min(v,p.length),this.setSelectionRange(v,v),f&&(f.revalidateField(m),f.revalidateField(c))})),[h,g].forEach(t=>{t&&t.addEventListener("input",()=>{f&&(f.revalidateField(c),f.revalidateField(m))})})})};document.addEventListener("DOMContentLoaded",()=>{L()});
