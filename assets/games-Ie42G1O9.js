import{m as e}from"./main-BINZ1ccu.js";document.addEventListener("alpine:init",()=>{e.store("filters",{categories:[],sort:"",sort_labels:{newest:"جدیدترین",oldest:"قدیمی‌ترین",most_expensive:"گران‌ترین",cheapest:"ارزان‌ترین"},tmp_keyword:"",keyword:"",tmp_price_from:"",tmp_price_to:"",price_from:"",price_to:"",options:[],init(){this.fromURL()},get filterCount(){return`(${this.categories.length+(this.price_from||this.price_to?1:0)+this.options.length})`},fromURL(){const t=new URLSearchParams(location.search);this.categories=t.getAll("categories[]"),this.sort=t.get("sort")||this.sort_labels.newest,this.price_from=t.get("price_from")||"",this.price_to=t.get("price_to")||"",this.tmp_price_from=this.price_from,this.tmp_price_to=this.price_to,this.options=t.getAll("options[]"),this.keyword=t.get("keyword")||"",this.tmp_keyword=t.get("keyword")||""},apply(){this.updateURL(),this.fetch()},updateURL(){const t=new URLSearchParams;this.categories.forEach(i=>t.append("categories[]",i)),this.price_from&&t.set("price_from",this.price_from),this.price_to&&t.set("price_to",this.price_to),this.keyword&&t.set("keyword",this.keyword),this.sort&&t.set("sort",this.sort),this.options&&this.options.forEach(i=>t.append("options[]",i)),history.replaceState({},"",`?${t.toString()}`)},fetch(){e.store("ui").startLoading(),console.log("AJAX filters:",{categories:this.categories,price_from:this.price_from,price_to:this.price_to,options:this.options}),setTimeout(()=>{e.store("ui").stopLoading()},2e3)},get hasActiveFilters(){return this.categories.length>0||this.options.length>0||this.price_from!==""||this.price_to!==""||this.keyword!==""},reset(){this.hasActiveFilters&&(this.categories=[],this.price_from="",this.price_to="",this.tmp_price_from="",this.tmp_price_to="",this.options=[],this.apply())},resetPrices(){this.tmp_price_from.trim()===""&&this.tmp_price_to.trim()===""||(this.tmp_price_from="",this.tmp_price_to="",this.price_from="",this.price_to="",this.apply())},applyPrices(){this.tmp_price_from.trim()===""&&this.tmp_price_to.trim()===""||(this.price_from=this.tmp_price_from,this.price_to=this.tmp_price_to,this.apply())},search(){this.keyword=this.tmp_keyword,this.apply()},get labelText(){return this.sort_labels[this.sort]||"جدیدترین"}})});
